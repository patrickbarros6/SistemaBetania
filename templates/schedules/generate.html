{% extends "_base_site.html" %}
{% block title %}Gerar Escala — Betânia{% endblock %}
{% block content %}
<h1 class="text-xl font-semibold mb-3">Gerar Escala</h1>
<form method="post" class="card bg-base-100 shadow-soft">
  <div class="card-body">
    {% csrf_token %}
    <div class="grid md:grid-cols-4 gap-4">
      <label class="form-control"> {{ form.year.label_tag }} {{ form.year }} </label>
      <label class="form-control"> {{ form.month.label_tag }} {{ form.month }} </label>
      <label class="form-control md:col-span-2"> {{ form.min_days_between.label_tag }} {{ form.min_days_between }} </label>
      <label class="form-control md:col-span-2"> {{ form.max_per_month.label_tag }} {{ form.max_per_month }} </label>
    </div>
    <div class="divider"></div>
    <p class="mb-2">Selecione os domingos deste mês (você pode desmarcar o último domingo se não tiver culto):</p>
    <div class="flex flex-wrap gap-4">
      {% for d in sundays %}
        <label class="label cursor-pointer gap-2">
          <input class="checkbox" type="checkbox" name="d_{{ d|date:'Y_m_d' }}" id="d{{ forloop.counter }}" checked>
          <span class="label-text">{{ d|date:"Y-m-d" }}</span>
        </label>
      {% endfor %}
    </div>
    <label class="form-control mt-3"> {{ form.extra_dates.label_tag }} {{ form.extra_dates }} <span class="label-text-alt">Ex.: 2025-09-07, 2025-09-21</span> </label>
    <div class="divider"></div>
    <p class="mb-2">Vagas por data:</p>
    <ul class="list-disc pl-6">
      <li>Cozinha: <b>{{ req.kitchen_per_sunday }}</b></li>
      <li>Limpeza: <b>{{ req.cleaning_per_sunday }}</b></li>
      <li>Servir: <b>{{ req.serving_per_sunday }}</b></li>
    </ul>
    <div class="mt-4 flex gap-2">
      <button class="btn btn-primary">Gerar</button>
      <a class="btn btn-outline" href="{% url 'schedules:list' %}">Cancelar</a>
    </div>
  </div>
</form>
{% endblock %}

