{% extends "_base_site.html" %}
{% block title %}Membros — Betânia{% endblock %}
{% block content %}
<section class="mb-4 flex items-center justify-between gap-3">
  <h1 class="text-xl font-semibold">Membros</h1>
  <a class="btn btn-primary btn-sm" href="{% url 'people:member_create' %}">Novo membro</a>
</section>

<div class="card bg-base-100 shadow-soft">
  <div class="card-body">
    <form class="flex flex-wrap items-end gap-2 mb-3">
      <label class="form-control w-full sm:w-auto">
        <span class="label-text">Buscar por nome</span>
        <input type="text" name="q" value="{{ q }}" class="input input-bordered w-full" placeholder="Digite um nome" />
      </label>
      <button class="btn btn-outline">Buscar</button>
    </form>

    <div class="overflow-x-auto">
      <table class="table table-zebra w-full">
        <thead>
          <tr><th>Nome</th><th>Telefone</th><th>Cozinha</th><th>Ativo</th><th class="text-right"></th></tr>
        </thead>
        <tbody>
          {% for m in members %}
            <tr>
              <td>{{ m.name }}</td>
              <td>{{ m.phone|default:"—" }}</td>
              <td>{% if m.kitchen_eligible %}Sim{% else %}<span class="text-base-content/60">Não</span>{% endif %}</td>
              <td>{% if m.active %}Sim{% else %}<span class="text-base-content/60">Não</span>{% endif %}</td>
              <td class="text-right">
                <a class="btn btn-sm btn-outline" href="{% url 'people:member_edit' m.id %}">Editar</a>
                {% if m.active %}
                  <a class="btn btn-sm btn-outline btn-error" href="{% url 'people:member_deactivate' m.id %}">Desativar</a>
                {% endif %}
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5" class="text-base-content/60">
                <div class="text-center border border-dashed rounded-xl p-6">Nenhum membro.</div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

